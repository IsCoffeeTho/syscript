let mutable: uint64 = 0;

fn panic(err: string): noreturn {
	print("PANIC: " + err);
	exit(1);
}

struct Person {
	name: string;
	pet: Animal;
}

class Animal {
	name: string;
	sound: string;
	Animal(name: string, sound: string) {
		this.name = name;
		this.sound = sound;
	}
	
	speak() {
		print(this.name + ": " + this.sound + "\n");
	}
}

class Dog extends Animal {
	Dog(name: string) {
		super(name, "Bark!");
	}
}

fn play_with_pet(of: Person): void {
	let announcement: string;
	announcement = of.name;
	announcement += " is petting ";
	announcement += of.pet.name;
	print(announcement + "\n");
	of.pet.speak();
}

fn main() {
	let friend: Person = {
		name: "John",
		pet: new Dog("Spot")
	};
	
	if (friend == null)
		panic("Couldn't make friend.");
	play_with_pet(friend);
	/*
		John is petting Spot
		Spot: Bark!
	*/
	// friend and friend.pet get grabage collected
}